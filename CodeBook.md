---
title: "CodeBook"
author: "Chris Nicoll"
date: "October 25, 2015"
output: html_document
---

# Overview

"Raw" input data were obtained from
<https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip>

The measurement data in this project are accelerometer and gyroscope data from Samsung smartphones, taken during six different activities.

Information about the experiment and data is found at
<http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones>
and in the README.txt and features_info.txt files in the zip archive.

As noted in README.txt included with the data, the data (aside from subject and activity labels) have been normalized to the range [-1,1].

# Input data used

Files in the zipped archive which are relevant to this project are:

**test/subject_test.txt** - participant ID numbers for the test set

**test/X_test.txt** - test data corresponding to 561 variables specified in **features.txt**

**test/y_test.txt** - activity ID numbers for the test set

**train/subject_train.txt** - participant ID numbers for the training set

**train/X_train.txt** - training data corresponding to 561 variables specified in **features.txt**

**train/y_train.txt** - activity ID numbers for the training set

**activity\_labels.txt** - maps activity labels to the numbers in **y\_test.txt** and **y\_train.txt**

**features.txt** - names the 561 variables recorded for all activities and participants in **train/X_test.txt** and **test/X_train.txt**

Files in the Inertial Signals directories are not needed for the analysis done here.

# Processing performed by the script **run_analysis.R**

## Loading and merging the test and train data

For each of the training and test sets, the subject/participant ID and activity ID data are added as columns to the 561-column "X" data set. The two resulting tables are combined into a single table with the same columns.

## Extracting mean and standard deviation values

The **features.txt** file is loaded and a regex search used to detect all the feature names containing either ```mean()``` or ```std()```. Features containing ```meanFreq()``` were rejected based on the instruction to "extract only the measurements on the mean and standard deviation for each measurement", and on the following definitions in **features_info.txt**: 

> mean(): Mean value
>
> std(): Standard deviation
>
> meanFreq(): Weighted average of the frequency components to obtain a mean frequency

```meanFreq()``` could be argued to be a type of mean, and the regex search can be modified to include these columns if desired, without altering the remaining script.

The indices of the labels found by this search are used to select data columns to retain.

## Labelling the activities

From the file **activity_labels.txt**, know to map activities as:

> 1 WALKING
>
> 2 WALKING_UPSTAIRS
>
> 3 WALKING_DOWNSTAIRS
>
> 4 SITTING
>
> 5 STANDING
>
> 6 LAYING

Use the slightly more readable labels "Walking", "WalkingUpstairs", "WalkingDownstairs", "Sitting", "Standing", "LyingDown".

## Labelling the variables

For readability, use regex matching in gsub() to remove brackets and hyphens; replace std and mean by StdDev and Mean; replace t with time and f with freq. Resulting name structure is described below.

## Calculating the mean for each activity/subject combination

This script uses ```group_by()``` and ```summarise_each()``` to isolate each unique activity/subject combination and take the mean for each.

# The tidy data set

The output file **UCImeans.txt**, generated by the R script **run_analysis.R**, and read by R using ```read.table("UCImeans.txt", header = TRUE)```, contains the means of each of the 66 mean and standard deviation variables for each unique participant/activity combination. Its dimensions are **180 rows by 68 columns**.

There are 30 participants and 6 different activities, therefore there are 30 * 6 = 180 means given in each column of the data table.

Column 1, **Activity**, contains the activity name, in factor form.

Column 2, **Subject**, contains the ID number of the participant.

The remaining 66 columns are the means requested. Names of the variables they belong to begin with ```time``` or ```freq```, depending on which domain the measurement belongs to. The type of signal is indicated by the next portion of the name, followed by ```Mean``` or ```StdDev``` to indicate whether this is a mean or standard deviation variable. Finally the axis is indicated with an ```X```, a ```Y```, or a ```Z```. As with the input data, these means are normalized in the range [-1,1].
